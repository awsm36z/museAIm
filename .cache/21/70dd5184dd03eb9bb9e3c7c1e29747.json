{"id":"iJxn","dependencies":[{"name":"/Users/yassine/Desktop/VSCODE/museAIm/museAIm/package.json","includedInParent":true,"mtime":1732240580580},{"name":"/Users/yassine/Desktop/VSCODE/museAIm/museAIm/node_modules/engine.io-client/build/esm/package.json","includedInParent":true,"mtime":1732238099727},{"name":"../transport.js","loc":{"line":1,"column":26,"index":26},"parent":"/Users/yassine/Desktop/VSCODE/museAIm/museAIm/node_modules/engine.io-client/build/esm/transports/webtransport.js","resolved":"/Users/yassine/Desktop/VSCODE/museAIm/museAIm/node_modules/engine.io-client/build/esm/transport.js"},{"name":"../globals.node.js","loc":{"line":2,"column":25,"index":70},"parent":"/Users/yassine/Desktop/VSCODE/museAIm/museAIm/node_modules/engine.io-client/build/esm/transports/webtransport.js","resolved":"/Users/yassine/Desktop/VSCODE/museAIm/museAIm/node_modules/engine.io-client/build/esm/globals.js"},{"name":"engine.io-parser","loc":{"line":3,"column":70,"index":162},"parent":"/Users/yassine/Desktop/VSCODE/museAIm/museAIm/node_modules/engine.io-client/build/esm/transports/webtransport.js","resolved":"/Users/yassine/Desktop/VSCODE/museAIm/museAIm/node_modules/engine.io-client/node_modules/engine.io-parser/build/esm/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.WT=void 0;var e=require(\"../transport.js\"),t=require(\"../globals.node.js\"),r=require(\"engine.io-parser\");class s extends e.Transport{get name(){return\"webtransport\"}doOpen(){try{this._transport=new WebTransport(this.createUri(\"https\"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved(\"error\",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError(\"webtransport error\",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=(0,r.createPacketDecoderStream)(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),i=(0,r.createPacketEncoderStream)();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{s.read().then(({done:e,value:t})=>{e||(this.onPacket(t),o())}).catch(e=>{})};o();const a={type:\"open\"};this.query.sid&&(a.data=`{\"sid\":\"${this.query.sid}\"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const s=e[r],i=r===e.length-1;this._writer.write(s).then(()=>{i&&(0,t.nextTick)(()=>{this.writable=!0,this.emitReserved(\"drain\")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}exports.WT=s;"},"sourceMaps":{"js":{"mappings":[{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":0}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":13}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":20}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":35}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":43}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":56}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":57}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":64}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":68}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":76}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":80,"column":1},"generated":{"line":1,"column":84}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":1,"column":0},"generated":{"line":1,"column":86}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_transport","original":{"line":1,"column":0},"generated":{"line":1,"column":90}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"require","original":{"line":1,"column":0},"generated":{"line":1,"column":92}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_globalsNode","original":{"line":2,"column":0},"generated":{"line":1,"column":119}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"require","original":{"line":2,"column":0},"generated":{"line":1,"column":121}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":2,"column":0},"generated":{"line":1,"column":129}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_engine","original":{"line":3,"column":0},"generated":{"line":1,"column":151}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"require","original":{"line":3,"column":0},"generated":{"line":1,"column":153}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":3,"column":0},"generated":{"line":1,"column":161}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":12,"column":7},"generated":{"line":1,"column":181}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"WT","original":{"line":12,"column":13},"generated":{"line":1,"column":187}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"Transport","original":{"line":12,"column":24},"generated":{"line":1,"column":197}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":12,"column":33},"generated":{"line":1,"column":199}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":13,"column":4},"generated":{"line":1,"column":209}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":14,"column":8},"generated":{"line":1,"column":220}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":14,"column":15},"generated":{"line":1,"column":226}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"doOpen","original":{"line":16,"column":4},"generated":{"line":1,"column":241}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":17,"column":8},"generated":{"line":1,"column":250}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":19,"column":12},"generated":{"line":1,"column":254}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_transport","original":{"line":19,"column":17},"generated":{"line":1,"column":259}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":19,"column":30},"generated":{"line":1,"column":270}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"WebTransport","original":{"line":19,"column":34},"generated":{"line":1,"column":274}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":19,"column":47},"generated":{"line":1,"column":287}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"createUri","original":{"line":19,"column":52},"generated":{"line":1,"column":292}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":19,"column":62},"generated":{"line":1,"column":302}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":19,"column":72},"generated":{"line":1,"column":311}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"opts","original":{"line":19,"column":77},"generated":{"line":1,"column":316}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"transportOptions","original":{"line":19,"column":82},"generated":{"line":1,"column":321}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":19,"column":99},"generated":{"line":1,"column":338}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"name","original":{"line":19,"column":104},"generated":{"line":1,"column":343}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":21,"column":8},"generated":{"line":1,"column":350}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"err","original":{"line":21,"column":15},"generated":{"line":1,"column":356}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":22,"column":12},"generated":{"line":1,"column":359}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":22,"column":19},"generated":{"line":1,"column":366}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"emitReserved","original":{"line":22,"column":24},"generated":{"line":1,"column":371}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":22,"column":37},"generated":{"line":1,"column":384}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"err","original":{"line":22,"column":46},"generated":{"line":1,"column":392}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":24,"column":8},"generated":{"line":1,"column":395}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_transport","original":{"line":24,"column":13},"generated":{"line":1,"column":400}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"closed","original":{"line":24,"column":24},"generated":{"line":1,"column":411}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"then","original":{"line":25,"column":13},"generated":{"line":1,"column":418}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":25,"column":18},"generated":{"line":1,"column":423}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":26,"column":12},"generated":{"line":1,"column":428}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"onClose","original":{"line":26,"column":17},"generated":{"line":1,"column":433}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"catch","original":{"line":28,"column":13},"generated":{"line":1,"column":445}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"err","original":{"line":28,"column":20},"generated":{"line":1,"column":451}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":29,"column":12},"generated":{"line":1,"column":455}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"onError","original":{"line":29,"column":17},"generated":{"line":1,"column":460}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":29,"column":25},"generated":{"line":1,"column":468}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"err","original":{"line":29,"column":47},"generated":{"line":1,"column":489}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":32,"column":8},"generated":{"line":1,"column":494}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_transport","original":{"line":32,"column":13},"generated":{"line":1,"column":499}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"ready","original":{"line":32,"column":24},"generated":{"line":1,"column":510}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"then","original":{"line":32,"column":30},"generated":{"line":1,"column":516}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":32,"column":35},"generated":{"line":1,"column":521}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":33,"column":12},"generated":{"line":1,"column":526}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_transport","original":{"line":33,"column":17},"generated":{"line":1,"column":531}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"createBidirectionalStream","original":{"line":33,"column":28},"generated":{"line":1,"column":542}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"then","original":{"line":33,"column":56},"generated":{"line":1,"column":570}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"stream","original":{"line":33,"column":62},"generated":{"line":1,"column":575}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":34,"column":16},"generated":{"line":1,"column":579}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"decoderStream","original":{"line":34,"column":22},"generated":{"line":1,"column":585}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":34,"column":38},"generated":{"line":1,"column":588}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"createPacketDecoderStream","original":{"line":34,"column":38},"generated":{"line":1,"column":590}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":34,"column":63},"generated":{"line":1,"column":592}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"Number","original":{"line":34,"column":64},"generated":{"line":1,"column":619}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"MAX_SAFE_INTEGER","original":{"line":34,"column":71},"generated":{"line":1,"column":626}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":34,"column":89},"generated":{"line":1,"column":643}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"socket","original":{"line":34,"column":94},"generated":{"line":1,"column":648}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"binaryType","original":{"line":34,"column":101},"generated":{"line":1,"column":655}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"reader","original":{"line":35,"column":22},"generated":{"line":1,"column":667}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"stream","original":{"line":35,"column":31},"generated":{"line":1,"column":669}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"readable","original":{"line":35,"column":38},"generated":{"line":1,"column":671}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"pipeThrough","original":{"line":35,"column":47},"generated":{"line":1,"column":680}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"decoderStream","original":{"line":35,"column":59},"generated":{"line":1,"column":692}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"getReader","original":{"line":35,"column":74},"generated":{"line":1,"column":695}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"encoderStream","original":{"line":36,"column":22},"generated":{"line":1,"column":707}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":36,"column":38},"generated":{"line":1,"column":710}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"createPacketEncoderStream","original":{"line":36,"column":38},"generated":{"line":1,"column":712}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":36,"column":63},"generated":{"line":1,"column":714}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"encoderStream","original":{"line":37,"column":16},"generated":{"line":1,"column":743}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"readable","original":{"line":37,"column":30},"generated":{"line":1,"column":745}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"pipeTo","original":{"line":37,"column":39},"generated":{"line":1,"column":754}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"stream","original":{"line":37,"column":46},"generated":{"line":1,"column":761}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"writable","original":{"line":37,"column":53},"generated":{"line":1,"column":763}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":38,"column":16},"generated":{"line":1,"column":773}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_writer","original":{"line":38,"column":21},"generated":{"line":1,"column":778}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"encoderStream","original":{"line":38,"column":31},"generated":{"line":1,"column":786}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"writable","original":{"line":38,"column":45},"generated":{"line":1,"column":788}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"getWriter","original":{"line":38,"column":54},"generated":{"line":1,"column":797}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":39,"column":16},"generated":{"line":1,"column":809}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"read","original":{"line":39,"column":22},"generated":{"line":1,"column":815}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"read","original":{"line":39,"column":29},"generated":{"line":1,"column":817}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"reader","original":{"line":40,"column":20},"generated":{"line":1,"column":822}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"read","original":{"line":41,"column":25},"generated":{"line":1,"column":824}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"then","original":{"line":42,"column":25},"generated":{"line":1,"column":831}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":42,"column":30},"generated":{"line":1,"column":836}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"done","original":{"line":42,"column":33},"generated":{"line":1,"column":838}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"done","original":{"line":42,"column":33},"generated":{"line":1,"column":843}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"value","original":{"line":42,"column":39},"generated":{"line":1,"column":845}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"value","original":{"line":42,"column":39},"generated":{"line":1,"column":851}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"done","original":{"line":43,"column":28},"generated":{"line":1,"column":857}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":46,"column":24},"generated":{"line":1,"column":861}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"onPacket","original":{"line":46,"column":29},"generated":{"line":1,"column":866}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"value","original":{"line":46,"column":38},"generated":{"line":1,"column":875}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"read","original":{"line":47,"column":24},"generated":{"line":1,"column":878}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"catch","original":{"line":49,"column":25},"generated":{"line":1,"column":885}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"err","original":{"line":49,"column":32},"generated":{"line":1,"column":891}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"read","original":{"line":52,"column":16},"generated":{"line":1,"column":899}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":53,"column":16},"generated":{"line":1,"column":903}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"packet","original":{"line":53,"column":22},"generated":{"line":1,"column":909}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":53,"column":31},"generated":{"line":1,"column":911}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"type","original":{"line":53,"column":33},"generated":{"line":1,"column":912}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":53,"column":39},"generated":{"line":1,"column":917}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":54,"column":20},"generated":{"line":1,"column":925}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"query","original":{"line":54,"column":25},"generated":{"line":1,"column":930}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"sid","original":{"line":54,"column":31},"generated":{"line":1,"column":936}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"packet","original":{"line":55,"column":20},"generated":{"line":1,"column":942}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"data","original":{"line":55,"column":27},"generated":{"line":1,"column":944}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":55,"column":45},"generated":{"line":1,"column":960}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"query","original":{"line":55,"column":50},"generated":{"line":1,"column":965}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"sid","original":{"line":55,"column":56},"generated":{"line":1,"column":971}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":57,"column":16},"generated":{"line":1,"column":980}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_writer","original":{"line":57,"column":21},"generated":{"line":1,"column":985}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"write","original":{"line":57,"column":29},"generated":{"line":1,"column":993}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"packet","original":{"line":57,"column":35},"generated":{"line":1,"column":999}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"then","original":{"line":57,"column":43},"generated":{"line":1,"column":1002}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":57,"column":48},"generated":{"line":1,"column":1007}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":57,"column":54},"generated":{"line":1,"column":1011}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"onOpen","original":{"line":57,"column":59},"generated":{"line":1,"column":1016}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"write","original":{"line":61,"column":4},"generated":{"line":1,"column":1030}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"packets","original":{"line":61,"column":10},"generated":{"line":1,"column":1036}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":62,"column":8},"generated":{"line":1,"column":1039}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"writable","original":{"line":62,"column":13},"generated":{"line":1,"column":1044}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":62,"column":24},"generated":{"line":1,"column":1054}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":63,"column":8},"generated":{"line":1,"column":1056}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":63,"column":13},"generated":{"line":1,"column":1060}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"i","original":{"line":63,"column":17},"generated":{"line":1,"column":1064}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":63,"column":21},"generated":{"line":1,"column":1066}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"i","original":{"line":63,"column":24},"generated":{"line":1,"column":1068}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"packets","original":{"line":63,"column":28},"generated":{"line":1,"column":1070}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"length","original":{"line":63,"column":36},"generated":{"line":1,"column":1072}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"i","original":{"line":63,"column":44},"generated":{"line":1,"column":1079}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":63,"column":49},"generated":{"line":1,"column":1083}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":64,"column":12},"generated":{"line":1,"column":1084}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"packet","original":{"line":64,"column":18},"generated":{"line":1,"column":1090}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"packets","original":{"line":64,"column":27},"generated":{"line":1,"column":1092}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"i","original":{"line":64,"column":35},"generated":{"line":1,"column":1094}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"lastPacket","original":{"line":65,"column":18},"generated":{"line":1,"column":1097}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"i","original":{"line":65,"column":31},"generated":{"line":1,"column":1099}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"packets","original":{"line":65,"column":37},"generated":{"line":1,"column":1103}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"length","original":{"line":65,"column":45},"generated":{"line":1,"column":1105}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":65,"column":54},"generated":{"line":1,"column":1112}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":66,"column":12},"generated":{"line":1,"column":1114}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_writer","original":{"line":66,"column":17},"generated":{"line":1,"column":1119}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"write","original":{"line":66,"column":25},"generated":{"line":1,"column":1127}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"packet","original":{"line":66,"column":31},"generated":{"line":1,"column":1133}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"then","original":{"line":66,"column":39},"generated":{"line":1,"column":1136}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":66,"column":44},"generated":{"line":1,"column":1141}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"lastPacket","original":{"line":67,"column":20},"generated":{"line":1,"column":1146}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":68,"column":20},"generated":{"line":1,"column":1150}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"nextTick","original":{"line":68,"column":20},"generated":{"line":1,"column":1152}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":68,"column":28},"generated":{"line":1,"column":1154}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":68,"column":29},"generated":{"line":1,"column":1164}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":69,"column":24},"generated":{"line":1,"column":1169}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"writable","original":{"line":69,"column":29},"generated":{"line":1,"column":1174}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":69,"column":40},"generated":{"line":1,"column":1184}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":70,"column":24},"generated":{"line":1,"column":1186}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"emitReserved","original":{"line":70,"column":29},"generated":{"line":1,"column":1191}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":70,"column":42},"generated":{"line":1,"column":1204}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":71,"column":23},"generated":{"line":1,"column":1214}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"setTimeoutFn","original":{"line":71,"column":28},"generated":{"line":1,"column":1219}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"doClose","original":{"line":76,"column":4},"generated":{"line":1,"column":1236}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":77,"column":8},"generated":{"line":1,"column":1246}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_a","original":{"line":77,"column":12},"generated":{"line":1,"column":1250}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":78,"column":35},"generated":{"line":1,"column":1252}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_a","original":{"line":78,"column":9},"generated":{"line":1,"column":1260}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":78,"column":14},"generated":{"line":1,"column":1262}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_transport","original":{"line":78,"column":19},"generated":{"line":1,"column":1267}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","original":{"line":78,"column":50},"generated":{"line":1,"column":1285}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_a","original":{"line":78,"column":43},"generated":{"line":1,"column":1289}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"_a","original":{"line":78,"column":68},"generated":{"line":1,"column":1292}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"close","original":{"line":78,"column":71},"generated":{"line":1,"column":1294}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"exports","original":{"line":80,"column":1},"generated":{"line":1,"column":1303}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"WT","original":{"line":80,"column":1},"generated":{"line":1,"column":1311}},{"source":"../../node_modules/engine.io-client/build/esm/transports/webtransport.js","name":"WT","original":{"line":80,"column":1},"generated":{"line":1,"column":1314}}],"sources":{"../../node_modules/engine.io-client/build/esm/transports/webtransport.js":"import { Transport } from \"../transport.js\";\nimport { nextTick } from \"../globals.node.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\n/**\n * WebTransport transport based on the built-in `WebTransport` object.\n *\n * Usage: browser, Node.js (with the `@fails-components/webtransport` package)\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebTransport\n * @see https://caniuse.com/webtransport\n */\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        try {\n            // @ts-ignore\n            this._transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this._transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this._transport.ready.then(() => {\n            this._transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this._writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this._writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this._writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this._transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n"},"lineCount":null}},"error":null,"hash":"65f5a73c457dfe906a7f09fc99650ce5","cacheData":{"env":{}}}